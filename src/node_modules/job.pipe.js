// const job = {
//   type: 'pipe',
//   creep: 'creepname',
//   flag: 'flagname'
// }

module.exports = {
  getCreepBody: (room, job) => [CARRY, MOVE],
  execute: (creep, job) => {
    var position = Game.flags[job.flag].pos

    if (creep.pos.x !== position.x || creep.pos.y !== position.y || creep.pos.roomName !== position.roomName) {
      creep.moveTo(position)
      return
    }

    creep.transfer(creep.room.storage, RESOURCE_ENERGY)

    var link = creep.pos.findInRange(FIND_STRUCTURES, 1, {filter: structure => structure.structureType === STRUCTURE_LINK})
    creep.withdraw(link[0], RESOURCE_ENERGY)
  }
}
