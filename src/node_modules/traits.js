var traits = {}
traits.harvest = require('trait.harvest')
traits.pickup = require('trait.pickup')
traits.repair = require('trait.repair')
traits.terminate = require('trait.terminate')

module.exports = (creep, traitsOrder) => {
  return _.reduce(traitsOrder, (trait, busy) => {
    // When doing something from another task, skip anything else.
    if (busy) {
      return true
    }

    // When the desired trait does not exit, ignore it and notify the developer.
    if (!_.has(traits, trait)) {
      Game.notify('Unknown trait (' + trait + ') issued for creep ' + creep.name)
      return false
    }

    // Execute trait code and determine busy state.
    return traits[trait](creep)
  }, false)
}
