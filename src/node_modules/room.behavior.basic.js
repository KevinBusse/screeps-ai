const Tree = require('tree')
const Selector = require('tree.composite.selector')
const Sequence = require('tree.composite.sequence')
const Invert = require('tree.decorator.invert')

const HasCreeps = require('room.condition.hasCreeps')

const BuildExtensions = require('room.action.buildExtensions')
const SpawnCreep = require('room.action.spawnCreep')
const SpawnDiggerPerSource = require('room.action.spawnDiggerPerSource')

module.exports = new Tree(
  'room.basic',
  new Selector('prio', [
    new Sequence('workforce', [
      new Invert('not1',
        new HasCreeps('checkCreepCount', {min: 5})
      ),
      new SpawnCreep('SpawnWorker', {
        behavior: 'worker',
        baseBody: [WORK, CARRY, MOVE],
        scaleBody: [WORK, CARRY, MOVE],
        max: 5
      })
    ]),
    new Sequence('digforce', [
      new HasCreeps('checkCreepCount', {min: 5}),
      new SpawnDiggerPerSource('spawnDiggers', {debug: true})
    ]),
    new BuildExtensions('ExtensionBuilder')
  ])
)

