var roles = {}
roles.harvester = require('creep.harvester')
roles.upgrader = require('creep.upgrader.js')
roles.builder = require('creep.builder')
roles.claimer = require('creep.claimer')

module.exports = () => {
  _.each(Game.creeps, (creep) => {
    // Check whether the creep has role, skip & notify otherwise.
    if (typeof creep.memory.role !== 'string') {
      Game.notify('Creep "' + creep.name + '" has no role.')
      return
    }

    // Check whether a definition for the specified role exists.
    if (!_.has(roles, creep.memory.role)) {
      Game.notify('Role "' + creep.memory.role + '" for creep "' + creep.name + '" is not defined.')
      return
    }

    // Execute the role specification.
    roles[creep.memory.role](creep)
  })
}
