module.exports = {

  spawn: function(desired) {
    const roleName = 'soldier';
    var spawnPoint =  Game.spawns[Object.keys(Game.spawns)[0]];
    var active =   _.filter(Game.creeps, (creep) => creep.memory.role === roleName);
    var energyShare = Math.floor(0.8 * spawnPoint.room.energyCapacityAvailable);



    if (active.length < desired ) {
      if (spawnPoint.room.energyAvailable < energyShare ) {
        return false;
      }
      //todo:
      //Calculate remaining energy for WORK genes
      let maxWork = Math.floor((spawnPoint.room.energyAvailable - 50 ) / 100);
      let dna = [MOVE]; // Move 50, WORK 100


      while(maxWork--)
      {
        dna.push(WORK);
      }
      let newCreep = spawnPoint.createCreep(dna, '', {role: roleName});
      console.log('SPAWN '+roleName+' '+JSON.stringify(dna)+' '+newCreep );
      return true;
    }
    return false;

  },

  /** @param {Creep} creep **/
  run: function (creep) {

    //todo:
  }
};